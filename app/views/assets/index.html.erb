<%- set_title 'WebCT / Moodle failid' -%>
<%- catch_errors_for @asset -%>

<div id="howto">
  <h2>HowTo</h2>
  <ol>
    <li><strong>WebCT</strong></li>
    <li>Ava assasments ning vali töö</li>
    <li>Edasi "View Submission"</li>
    <li>Nüüd ava <strong>uues</strong> aknas vastav Attempt</li>
    <li>Right click ja Save Page As... (html only)</li>
  </ol>

  <br/>
  <ol>
    <li><strong>Moodle</strong></li>
    <li>Ava töö tulemused (kõik ühel lehel)</li>
    <li>Right click ja Save Page As... (html only)</li>
  </ol>
</div>

<%= render :partial => 'shouts' %>

<div id="new_file_div">
  <%= link_to "Lisa uus fail", "#", :onclick => "Modalbox.show($('new_asset_modalbox'), {title: 'Lisa uus fail', width: 520, height: 220, slideDownDuration: 0}); return false;", :id => "new_file_link" %>
</div>

<div id="new_asset_modalbox" style="display: none;">
  <%= render :partial => 'form' %>
</div>

<br/>

<%= render :partial => 'categories' %>

<br style="clear: both;"/>

<table id="assets" style="display: none;">
  <thead class="odd">
    <tr>
      <td>Tiitel</td>
      <td>Tüüp</td>
      <td>Aasta</td>
      <td>Autor</td>
      <td>Fail</td>
    </tr>
  </thead>

  <tbody>
  </tbody>
</table>
<div id="assets_spinner" style="display: none;"><%= image_tag "spinner.gif" %></div>

<%# In place text editors for title and category columns %>
<%# TODO: kasuta unobtrusive js-i %>
<% if admin? -%>
  <script type="text/javascript">
    <% @assets.each do |asset| -%>
      in_place_editor($('<%= dom_id(asset) %>'), 'title', '<%= asset_path(asset, :format => "json") %>');
      in_place_editor($('<%= dom_id(asset) %>'), 'category', '<%= asset_path(asset, :format => "json") %>');
    <% end -%>
  </script>
<% end -%>

