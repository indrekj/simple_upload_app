<%- set_title 'WebCT / Moodle failid' -%>
<%- catch_errors_for @assessment -%>

<div id="howto">
  <h2>HowTo</h2>
  <ol>
    <li><strong>WebCT</strong></li>
    <li>Ava assasments ning vali töö</li>
    <li>Edasi "View Submission"</li>
    <li>Nüüd ava <strong>uues</strong> aknas vastav Attempt</li>
    <li>Right click ja Save Page As... (html only)</li>
  </ol>

  <br/>
  <ol>
    <li><strong>Moodle</strong></li>
    <li>Ava töö tulemused (kõik ühel lehel)</li>
    <li>Right click ja Save Page As... (html only)</li>
  </ol>
</div>

<script type="text/javascript">
  var categoriesList = <%=raw @categories.map(&:name).to_json %>;
</script>

<div id="new_file_div">
  Hetkel Read-Only Database<br/><br/>
  <%= link_to "teachers.ee", "http://teachers:teachers@teachers.ee" %>
</div>
<!-- read only db
  <div id="new_file_div">
    <%= link_to "lisa uus fail", "#", :onclick => "Modalbox.show($('new_assessment_modalbox'), {title: 'Lisa uus fail', width: 520, height: 265, slideDownDuration: 1}); return false;", :id => "new_file_link" %>
  </div>

  <div id="new_assessment_modalbox" style="display: none;">
    <%= render :partial => 'form' %>
  </div>
-->

<br/>

<%= render :partial => 'categories' %>

<br style="clear: both;"/>

<table id="assessments" style="display: none;">
  <thead class="odd">
    <tr>
      <td>Tiitel</td>
      <td>Tüüp</td>
      <td>Aasta</td>
      <td>Autor</td>
      <td>Fail</td>
    </tr>
  </thead>

  <tbody>
  </tbody>
</table>
<div id="assessments_spinner" style="display: none;"><%= image_tag "spinner.gif" %></div>

<%# In place text editors for title and category columns %>
<%# TODO: kasuta unobtrusive js-i %>
<% if admin? -%>
  <script type="text/javascript">
    <% @assessments.each do |assessment| -%>
      in_place_editor($('<%= dom_id(assessment) %>'), 'title', '<%= assessment_path(assessment, :format => "json") %>');
      in_place_editor($('<%= dom_id(assessment) %>'), 'category', '<%= assessment_path(assessment, :format => "json") %>');
    <% end -%>
  </script>
<% end -%>

